# PowerPlatform-Dataverse-Dataflow-LargeCSV

巨大CSVファイルのインポート速度計測

---

## Dataset

| 名称                     | 版                     | サイズ* |            バイト数* | 件数（公開元で公表） |     行数** | 1行当たりバイト数 | レコード数 | スキップ行*** | 列数 | URL                                                            | ファイル名                  |
| ------------------------ | ---------------------- | ------: | -------------------: | -------------------- | ---------: | ----------------: | ---------: | ------------: | ---: | -------------------------------------------------------------- | --------------------------- |
| ニコニコ大百科IME辞書    | 2024年08月21日 03:54版 | 12.1 MB |    12,704,748 バイト | 登録単語数261890     |    261,897 |              48.5 |    261,890 |             7 |      | http://tkido.com/nicoime/nicoime.zip                           | nicoime_msime.txt           |
| 郵便番号データ           | 2024年7月31日          | 17.4 MB |    18,337,437 バイト | -                    |    124,386 |             147.4 |    124,386 |             0 |      | https://www.post.japanpost.jp/zipcode/download.html            | utf_ken_all.csv             |
| 住所.jp                  | 2024-08-09             | 20.6 MB |    21,679,092 バイト | 約１２万５千件       |    150,137 |             144.4 |    150,136 |             1 |      | http://jusyo.jp/csv/new.php                                    | zenkoku.csv                 |
| 法人番号                 | 令和6年7月31日         | 1.09 GB | 1,178,336,346 バイト | -                    |  5,507,150 |             214.0 |  5,507,150 |             0 |      | https://www.houjin-bangou.nta.go.jp/download/zenken/index.html | 00_zenkoku_all_20240731.csv |
| 位置参照情報　街区レベル | 令和5年 22.0a          | 1.96 GB | 2,110,905,438 バイト | -                    | 19,576,028 |             107.9 | 19,576,027 |             1 |      | https://nlftp.mlit.go.jp/cgi-bin/isj/dls/_choose_method.cgi    | -                           |

- `*` ... エクスプローラーでの表示（ヘッダー行などのデータ行以外を含む）
- `**` ... FINDコマンドでの計測（ヘッダー行などのデータ行以外を含む） `find /v /c "" .\*.csv`
- `***` ... `Get-Content .\*.csv -TotalCount 10`

## ファイルサイズの上限

| 種別         | 上限サイズ |
| ------------ | ---------: |
| テキスト/CSV |    1,024MB |

## 環境の種類

| 種類                          | データフロー |
| ----------------------------- | :----------: |
| 既定                          |      ×       |
| 実稼働                        |      ○       |
| サンドボックス                |      ○       |
| 試用版                        |     低速     |
| 開発者                        |     低速     |
| Microsoft Dataverse for Teams |      -       |

- [Power Platform 環境の種類](https://learn.microsoft.com/ja-jp/power-platform/admin/environments-overview#power-platform-environment-types)

## 計測結果

「ファイルのアップロード」（データフローのウィザード内での OneDrive for Business へのアップロード）に掛かる時間は除く。

上り方向の回線速度に依存するが、アプリを利用する場合は、自動または 50 KB/s ～ 100 MB/s に設定可能。

- [OneDrive 同期アプリのアップロードまたはダウンロードの速度を変更する](https://support.microsoft.com/ja-jp/office/onedrive-%E5%90%8C%E6%9C%9F%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89%E3%81%BE%E3%81%9F%E3%81%AF%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%AE%E9%80%9F%E5%BA%A6%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B-71cc69da-2371-4981-8cc8-b4558bdda56e)

### 試用環境（開発者環境）

| 名称                  | 追加 計測結果 | 削除 計測結果 |
| --------------------- | ------------: | ------------: |
| ニコニコ大百科IME辞書 |      04:18:02 |    約00:50:00 |
| 住所.jp               |      03:07:42 |    約00:35:00 |

### 運用環境（サンドボックス環境）

#### 1回目

| 名称                        |                  追加 計測結果 |   削除 計測結果 |
| --------------------------- | -----------------------------: | --------------: |
| ニコニコ大百科IME辞書       |                       00:16:12 |      約00:50:00 |
| 郵便番号データ              |                       00:10:43 |      約00:20:00 |
| 住所.jp                     |                       00:10:11 |      約00:25:00 |
| 法人番号 *                  | 05:04:43 + 04:33:04 = 09:37:47 | 推定 約15:00:00 |
| 位置参照情報　街区レベル ** |                                |                 |

- `*` ... 3,000,000行ごとにファイルを分割して入力
- `**` ... 7,000,000行ごとにファイルを分割して入力

#### 2回目

| 名称                     | 追加 計測結果 | 削除 計測結果 |
| ------------------------ | ------------: | ------------: |
| ニコニコ大百科IME辞書    |               |               |
| 郵便番号データ           |               |               |
| 住所.jp                  |               |               |
| 法人番号                 |               |               |
| 位置参照情報　街区レベル |               |               |

## その他の注意事項

- データフローの発行中に、データ型／範囲の不一致などのエラーが大量に発生しすぎるとデータフローの実行が途中で中断される

## リンク

### レコードの一括追加

[データフロー](https://make.powerapps.com/environments/{GUID}/dataintegration/list)から追加する。

### レコードの一括削除

[Power Platform管理センター > （対象の）環境 > 設定 > データ管理 > 一括削除](https://org********.crm5.dynamics.com/tools/bulkdelete/home_bulkDeletionJobs.aspx)から一括削除ウィザードを実行する。

---

Copyright (c) 2024 YA-androidapp(https://github.com/yzkn) All rights reserved.
